<!DOCTYPE html>
<html>
<head>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script src="https://kit.fontawesome.com/5104cee2db.js"></script>
  <link href="https://fonts.googleapis.com/css?family=Baloo+2|Poppins&display=swap" rel="stylesheet">
</head>
<style>

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  background-color: #AC0000;
  height: 100%;
  overflow: hidden;
}

table#dots{
  margin-left: auto;
  margin-right: auto;
}

#title{
  color: white;
  font-size: 120px;
  text-align: center;
  font-family: 'Poppins', sans-serif;
  line-height: 110px;
  transition: 2.5s;

  /* font-family: 'Baloo 2', cursive; */
}

.dot {
  height: 55px;
  width: 55px;
  background-color: white;
  border-radius: 50%;
  display: inline-block;
  margin-left: 12px;
  margin-right: 12px;

  text-align: center;
  font-family: 'Poppins', sans-serif;
  color: #AC0000;
  font-size: 65px;
  line-height: 79px;
  font-weight: bold;
}

@keyframes change {
  0%{
    background-position: 0 50%;
  }
  50%{
    background-position: 100% 50%;
  }
  100%{
    background-position: 0% 50%;
  }
}

.dot:hover {
  cursor: pointer;
  transition-timing-function: ease-in-out;
  transition: 0.25s;
  -webkit-transform: translateY(-2px);
	transform: translateY(-2px);
}

#my-canvas{
  position:absolute;
  top:0;
  left: 0;
  z-index: -1;
}

#menu{
  transition: 1.5s;
  transition-timing-function: ease-in;
}

.arrows{
  position: fixed;
  width: 65px;
  height:65px;
  color: #000000;
  /* background-color: purple; */
  cursor: pointer;
  font-size: 40px;
  outline: none;
  border: none;
}

#level-1{
  display: none;
  background-color: purple;
}

</style>

<body>
  <canvas id="my-canvas"></canvas>
  <h1 id = "title">The Box of <br> Algod√≥n</h1>
  <div id = "menu">
    <table id = "dots">
      <tr>
        <th><span class="dot" id = "level-1-button">1</span></th>
        <th><span class="dot" id = "level-2-button">2</span></th>
        <th><span class="dot" id = "level-3-button">3</span></th>
        <th><span class="dot" id = "level-4-button">4</span></th>
      </tr>
    </table>
  </div>
  <div id = "level-1">
    <div id= "level-1-1"><i class="fas fa-arrow-up arrows"></i> </div>
    <div id= "level-1-2"><i class="fas fa-arrow-up arrows"></i> </div>
    <div id= "level-1-3"><i class="fas fa-arrow-up arrows" style = "right = 10px; bottom: 10px;"></i> </div>
  </div>
</body>

<script>
  document.getElementById("level-1-button").addEventListener("click", function (){menuTransition("level-1-button")});
  document.getElementById("level-2-button").addEventListener("click", function (){menuTransition("level-2-button")});
  document.getElementById("level-3-button").addEventListener("click", function (){menuTransition("level-3-button")});
  document.getElementById("level-4-button").addEventListener("click", function (){menuTransition("level-4-button")});
  window.addEventListener("resize", windowReSize);

  var canvas = document.getElementById("my-canvas");
  var c = canvas.getContext("2d");
  windowReSize();

  function windowReSize(){
    console.log("change");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    document.getElementById("level-1").style.width = window.innerWidth;
    document.getElementById("level-1").style.height = window.innerHeight - 220 + "px";
    placeArrows();
  }

  var x = 0;
  var max = 0;
  var r = 0;
  var y = 0;
  var currentLevel = "menu";

  var buttonArray = [ [""],
                      [""] ];


  function menuTransition(id){
    var element = document.getElementById(id)
    var position = element.getBoundingClientRect();
    var cx = position.left + element.clientWidth/2;;
    var cy = position.top + element.clientWidth/2;;

    x = cx;
    y = cy;
    r = element.clientWidth/2;
    max = maxRadius(element);
    animate();

    var allLevels = ["level-1-button","level-2-button","level-3-button","level-4-button"];

    for (const a of allLevels) {
      if(a != id){
        document.getElementById(a).innerHTML="";
      }
    }
    currentLevel = id;
  }

  function animate(){
    // console.log(r);
      c.clearRect(0,0,window.innerWidth, window.innerHeight);

      if(r<max){
        requestAnimationFrame(animate);
      }
      if(r >= max){
        setUpLevel();
      }

      c.beginPath();
      c.arc(x,y,r,0,Math.PI*2,false);
      // c.arc(100,100,1000,0,Math.PI*2,false);
      c.fillStyle = "white";
      c.fill();
      r = r + 10;
  }

  function maxRadius(element){
    var position = element.getBoundingClientRect();
    var x = position.left + element.clientWidth/2; //NOT RIGHT THIS IS NOT CENTERED
    var y = position.top + element.clientWidth/2;
    var w = window.innerWidth;
    var h = window.innerHeight;

    var maxDistance = 0.0;

    if(Math.sqrt(x**2 + y**2) > maxDistance){
      maxDistance = Math.sqrt(x**2 + y**2);
    }
    if(Math.sqrt(x**2 + (h-y)**2) > maxDistance){
      maxDistance = Math.sqrt(x**2 + (h-y)**2);
      // console.log(x^2 + y^2);
    }
    if(Math.sqrt((w-x)**2 + y**2) > maxDistance){
      maxDistance = Math.sqrt((w-x)**2 + y**2);
    }
    if(Math.sqrt((w-x)**2 + (h-y)**2) > maxDistance){
      maxDistance = Math.sqrt((w-x)**2 + (h-y)**2);
    }

    return maxDistance;
  }

  function setUpLevel(){
    document.getElementById("menu").style.opacity = 0;
    setTimeout(function(){

      document.getElementById("menu").style.display = "none";
      document.body.style.backgroundColor = "white";
      document.getElementById("title").style.color = "black";

      placeArrows();

    }, 1500);

  }

  function placeArrows(){
    if(currentLevel == "level-1-button"){
      document.getElementById("level-1").style.display = "block";

      document.getElementById("level-1-1").style.left = 0 + "px";
      document.getElementById("level-1-1").style.top = 0 + "px";
      console.log("hello");

      document.getElementById("level-1-2").style.left = 100 + "px";
      document.getElementById("level-1-2").style.top = 100 + "px";

      document.getElementById("level-1-3").style.right = 300 + "px";
      document.getElementById("level-1-3").style.bottom = 300 + "px";
      console.log("hello3");
    }
    else if(currentLevel == "level-2-button"){
      document.getElementById("level-2").style.display = "block";
    }
    else if(currentLevel == "level-3-button"){
      document.getElementById("level-3").style.display = "block";
    }
    else if(currentLevel == "level-4-button"){
      document.getElementById("level-4").style.display = "block";
    }
    else{
    }
  }

  function complete(){
  }


</script>

<!-- https://speckyboy.com/custom-hover-click-effects-css-javascript/ -->
